<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script> <!-- –í–æ—Ç —ç—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ -->
</head>
<body>

  <h1>üì¶ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>

  <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ –≤ –º–µ–Ω—é -->
  <a href="index.html" class="back-btn">‚Üê –≤ –º–µ–Ω—é</a>

  <form id="checkout-form">
    <label>–ò–º—è:</label>
    <input type="text" id="name" required>

    <label>–¢–µ–ª–µ—Ñ–æ–Ω:</label>
    <input type="tel" id="phone" required>

    <label>–ê–¥—Ä–µ—Å:</label>
    <input type="text" id="address" required>

    <h2>üßæ –í–∞—à –∑–∞–∫–∞–∑:</h2>
    <ul id="order-list"></ul>

    <p>–ò—Ç–æ–≥–æ: <span id="total-checkout">0</span> ‚ÇΩ</p>

    <button class="send">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </form>

  <script>
document.querySelector(".send").addEventListener("click", function (e) {
  e.preventDefault();

  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const address = document.getElementById("address").value.trim();

  const orderItems = JSON.parse(localStorage.getItem("cart") || "[]");
  const total = orderItems.reduce((sum, item) => sum + item.price * item.count, 0);

  const data = {
    name,
    phone,
    address,
    order: orderItems,
    total
  };

  if (window.Telegram.WebApp) {
    Telegram.WebApp.sendData(JSON.stringify(data));
    Telegram.WebApp.close();
  } else {
    alert("–ë–æ—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ Telegram WebApp.");
  }
});
</script>

  <script src="checkout.js"></script>
</body>
</html>
